"use strict";function createWaveformElements(e,t,a,n,o,r,d){var s=document.getElementById(e),i=document.createElement("div");i.id=t;var c=document.createElement("div");c.id=a;var m=document.createElement("audio");m.controls="controls",c.appendChild(m);var l=document.createElement("source");l.src=n,l.type=o;var u=document.createElement("source");u.src=r,u.type=d,m.appendChild(l),m.appendChild(u);var v=document.createElement("button");v.classList.add("waves-effect"),v.classList.add("waves-light"),v.classList.add("btn"),v.setAttribute("data-action","zoom-in"),v.innerHTML="zoom in";var g=document.createElement("button");g.classList.add("waves-effect"),g.classList.add("waves-light"),g.classList.add("btn"),g.setAttribute("data-action","zoom-out"),g.innerHTML="zoom out";var f=document.createElement("button");f.classList.add("waves-effect"),f.classList.add("waves-light"),f.classList.add("btn"),f.setAttribute("data-action","add-segment"),f.innerHTML="Add a Segment";var p=document.createElement("button");p.classList.add("waves-effect"),p.classList.add("waves-light"),p.classList.add("btn"),p.setAttribute("data-action","remove-segments"),p.innerHTML="Remove all Segments";var h=document.createElement("button");h.classList.add("waves-effect"),h.classList.add("waves-light"),h.classList.add("btn"),h.setAttribute("data-action","add-point"),h.innerHTML="Add a Point",c.appendChild(v),c.appendChild(g),c.appendChild(f),c.appendChild(p),c.appendChild(h),s.appendChild(i),s.appendChild(c)}function setWaveformOptions(e,t,a){var n={container:document.getElementById(e),mediaElement:document.querySelector("audio"),dataUri:{arraybuffer:t,json:a},height:100,keyboard:!1,inMarkerColor:"#a0a0a0",outMarkerColor:"#a0a0a0",zoomWaveformColor:"#FF0000",overviewWaveformColor:"#FF0000",overviewHighlightRectangleColor:"#9BF4D5",segmentColor:"rgba(255, 161, 39, 1)",playheadColor:"rgba(0, 0, 0, 1)",playheadTextColor:"#aaa",pointMarkerColor:"#1DAD9B",axisGridlineColor:"#ccc",axisLabelColor:"#aaa"};return n}function makeWaveformSet(e){window.instance=e,document.querySelector('[data-action="zoom-in"]').addEventListener("click",e.zoom.zoomIn.bind(e)),document.querySelector('[data-action="zoom-out"]').addEventListener("click",e.zoom.zoomOut.bind(e)),document.querySelector('button[data-action="add-segment"]').addEventListener("click",function(){var t={startTime:e.time.getCurrentTime(),endTime:e.time.getCurrentTime()+5,editable:!0};e.segments.add([t])}),document.querySelector('button[data-action="remove-segments"]').addEventListener("click",function(){_removeAllTrackSegments(e)}),document.querySelector('button[data-action="add-point"]').addEventListener("click",function(){var t={timestamp:e.time.getCurrentTime(),editable:!0};e.points.add([t])}),e.on("segments.ready",function(){console.log("track loaded")})}!function(e){var t="first-waveform-visualiser-container";createWaveformElements("waveform-div",t,"demo-controls","./test_data/sample.mp3","audio/mpeg","./test_data/sample.ogg","audio/ogg");var a=e.init(setWaveformOptions(t,"/test_data/sample.dat","/test_data/sample.json"));makeWaveformSet(a)}(peaks.js);var _generateId=function(e){return e.name.toLowerCase()+"10"},_getTrackSegments=function(e){return e.segments.getSegments()},_removeTrackSegments=function(e,t,a){return e.segments.removeByTime(t,a)},_removeAllTrackSegments=function(e){return e.segments.removeAll()},xhr=new XMLHttpRequest;xhr.responseType="arraybuffer",xhr.open("GET","test_data/sample.dat"),xhr.addEventListener("load",function(e){var t=WaveformData.create(e.target);console.log(t);var a=t.resample({width:500});console.log(a.min.length);var a=t.resample({scale:3*t.adapter.scale}),n=t.resample({width:500,from:0,to:500}),o=function(e){var t=256;return function(a){return e-(a+128)*e/t}},r=document.getElementById("canvas-element"),d=o(r.height),s=r.getContext("2d");s.beginPath(),n.min.forEach(function(e,t){s.lineTo(t+.5,d(e)+.5)}),n.max.reverse().forEach(function(e,t){s.lineTo(n.offset_length-t+.5,d(e)+.5)}),s.closePath(),s.stroke()}),xhr.send();